@using ESOA.Model
@model Rate

@using (Html.BeginForm("UpdateRate", "Rate", null, FormMethod.Post, null, new { id = "frmRateDtl" }))
{ 
    <div class="modal-header">
        <h5 class="modal-title" id="modal-xl-Label">Rate @if (Model != null) { <label> - Edit</label> } else{ <label> - Add New</label> }</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body"> 
        <!-- body -->
        <div class="row g-2 gy-2" id="rateDetailContainer">
            @Html.HiddenFor(m => m.Id)
            <div class="col-md-12">
                <div class="form-floating">
                    @Html.TextBoxFor(m => m.Reference, new { @class = "form-control required-1", @placeholder = "reference", @type = "input", @required = "required" })
                    <label for="">Reference</label>
                    <div class="invalid-feedback">
                        Please provide reference.
                    </div>
                </div>
            </div>
            
            <div class="col-md-12">
                <div class="row g-2">
                    <div class="col-md-8">
                        <div class="form-floating">
                            @Html.TextBoxFor(m => m.IPP, new { @class = "form-control required-2", @placeholder = "", @type = "number", @min = "0", @required = "required" })
                            <label for="">IPP</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12">
                            <div class="form-floating">
                                @Html.DropDownListFor(m => m.RateType_IPP, new SelectList(ViewBag.RateTypeList, "Value", "Name"), new { @class = "form-select required-3 drop-down", @required = "required" })
                                <label>IPP Rate Type</label>
                            </div>
                        </div>
                    </div>
                </div> 
            </div>

            <div class="col-md-12">
                <div class="row g-2">
                    <div class="col-md-8">
                        <div class="form-floating">
                            @Html.TextBoxFor(m => m.PP_SC, new { @class = "form-control required-4", @placeholder = "", @type = "number", @min = "0", @required = "required" })
                            <label for="">PP/SC</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12">
                            <div class="form-floating">
                                @Html.DropDownListFor(m => m.RateType_PP_SC, new SelectList(ViewBag.RateTypeList, "Value", "Name"), new { @class = "form-select required-5 drop-down", @required = "required" })
                                <label>PP/SC Rate Type</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="row g-2">
                    <div class="col-md-8">
                        <div class="form-floating">
                            @Html.TextBoxFor(m => m.RTA, new { @class = "form-control required-6", @placeholder = "", @type = "number", @min = "0", @required = "required" })
                            <label for="">RTA</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12">
                            <div class="form-floating">
                                @Html.DropDownListFor(m => m.RateType_RTA, new SelectList(ViewBag.RateTypeList, "Value", "Name"), new { @class = "form-select required-7 drop-down", @required = "required" })
                                <label>RTA Rate Type</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="row g-2">
                    <div class="col-md-8">
                        <div class="form-floating">
                            @Html.TextBoxFor(m => m.SNS, new { @class = "form-control required-8", @placeholder = "", @type = "number", @min = "0", @required = "required" })
                            <label for="">SNS</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12">
                            <div class="form-floating">
                                @Html.DropDownListFor(m => m.RateType_SNS, new SelectList(ViewBag.RateTypeList, "Value", "Name"), new { @class = "form-select required-9 drop-down", @required = "required" })
                                <label>SNS Rate Type</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="row g-2">
                    <div class="col-md-8">
                        <div class="form-floating">
                            @Html.TextBoxFor(m => m.IPPX, new { @class = "form-control required-10", @placeholder = "", @type = "number", @min = "0", @required = "required" })
                            <label for="">IPPX</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12">
                            <div class="form-floating">
                                @Html.DropDownListFor(m => m.RateType_IPPX, new SelectList(ViewBag.RateTypeList, "Value", "Name"), new { @class = "form-select required-11 drop-down", @required = "required" })
                                <label>IPPX Rate Type</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="form-floating">
                    @Html.TextBoxFor(m => m.From, new { @class = "form-control required-12", @placeholder = "from", @type = "date", @required = "required" })
                    <label for="">From</label>
                </div>
            </div>
            <div class="col-md-12">
                <div class="form-floating">
                    @Html.TextBoxFor(m => m.To, new { @class = "form-control required-13", @placeholder = "to", @type = "date", @required = "required" })
                    <label for="">To</label>
                </div>
            </div>
        </div>  
        <!-- ---- --> 
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        @if (@Model != null)
        {
            <button class="btn btn-primary" type="submit" id="btnSave">Save</button>
        }
        else
        {
            <button class="btn btn-primary" type="submit" id="btnAdd">Add</button>
        }
    </div>
}

@* <link href="~/css/_customValidation.css" rel="stylesheet" /> *@
<script src="~/js/_customValidation.js" type="text/javascript"></script>

<script type="text/javascript">

    $(document).ready(function () 
    {
        //clear all dropdownlist selection
        if ($('#Id').val() == '') {
            document.getElementById("RateType_IPP").selectedIndex = "-1";
            document.getElementById("RateType_PP_SC").selectedIndex = "-1";
            document.getElementById("RateType_RTA").selectedIndex = "-1";
            document.getElementById("RateType_SNS").selectedIndex = "-1";
            document.getElementById("RateType_IPPX").selectedIndex = "-1";
        }
        

        $('#btnSave').click(function (evt) 
        {
            evt.preventDefault(); 
            
            //custom form validation
            validateForm(13);
            if (isFormValidated) {
                //alert('all input was good');
                saveRateDetails(evt);
            } else {
                swal.fire("Error", "Please check fields for proper input!!!.", "error");
            }

        });

        $('#btnAdd').click(function (evt) 
        { 
            evt.preventDefault(); 
            //custom form validation
            validateForm(13);
            if (isFormValidated) {
                //alert('all input was good');
                AddNewRateDetails();
            } else {
                swal.fire("Error", "Please check fields for proper input!!!.", "error");
            }
            
        });
        
    });
</script>